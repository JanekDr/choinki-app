{% extends 'main_choinki\index.html' %}
{% block title %}Panel{% endblock %}
{% block content %}

<div class="container d-flex justify-content-center dashboard" id="login-border">
    <div class="container-login">
        <h1>Panel administracyjny</h1>
        <hr>
        <form method="GET">
        <div class="sales-income justify-content-center">
            <div class="column summary-container-sales">
                <b class="float-start">Sprzedaże | dziś</b>
                <div class="btn-group dropup float-end">
                    <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      więcej
                    </button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item" name="sales_range" value="day" type="submit">dziś</button>
                            <button class="dropdown-item" name="sales_range" value="week" type="submit">tydzień</button>
                            <button class="dropdown-item" name="sales_range" value="month" type="submit">miesiąc</button>
                            <button class="dropdown-item" name="sales_range" value="year" type="submit">rok</button>
                            <button class="dropdown-item" name="sales_range" value="all_time" type="submit">ciągle</button>
                        </div>
                </div>
                <br>
                <div class="d-flex justify-content-center align-items-center orders_count_container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="58" height="58" fill="currentColor" class="bi bi-cart-check" viewBox="0 0 16 16">
                        <path d="M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
                        <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                      </svg>
                    <b class="orders_count">{{orders_count}}</b>
                </div>
            </div>
            <div class="column summary-container-income">
                <b class="float-start">Przychód | dziś</b>
                <div class="btn-group dropup float-end">
                    <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        więcej
                    </button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item" name="income_range" value="day" type="submit">dziś</button>
                            <button class="dropdown-item" name="income_range" value="week" type="submit">tydzień</button>
                            <button class="dropdown-item" name="income_range" value="month" type="submit">miesiąc</button>
                            <button class="dropdown-item" name="income_range" value="year" type="submit">rok</button>
                            <button class="dropdown-item" name="income_range" value="all_time" type="submit">ciągle</button>
                        </div>
                </div>
                <br>
                <div class="d-flex justify-content-center align-items-center total_cost_container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-cash-coin" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"/>
                        <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"/>
                        <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"/>
                        <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"/>
                      </svg>
                    <b>{{total_cost}}</b>
                </div>
            </div>
        </div>
        <div class="justify-content-center">
            <div class="column summary-container-customers">
                <b class="float-start">Klienci | ostatni rok</b>
                <div class="btn-group dropup float-end">
                    <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      więcej
                    </button>
                    <div class="dropdown-menu">
                        <button class="dropdown-item" name="customers_range" value="day" type="submit">dziś</button>
                        <button class="dropdown-item" name="customers_range" value="week" type="submit">tydzień</button>
                        <button class="dropdown-item" name="customers_range" value="month" type="submit">miesiąc</button>
                        <button class="dropdown-item" name="customers_range" value="year" type="submit">rok</button>
                        <button class="dropdown-item" name="customers_range" value="all_time" type="submit">ciągle</button>
                    </div>
                </div>
                <br>
                <div class="d-flex justify-content-center align-items-center total_cost_container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-people" viewBox="0 0 16 16">
                        <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"/>
                      </svg>
                    <b>{{customers_count}}</b>
                </div>
            </div>
        </div>
        <hr>
        <div class="last-orders-container">
            <div class="d-col justify-content-center">
                <div class="d-row summary-container">
                    <b class="float-start">Ostatnie zamówienia | 5</b>
                    <div class="btn-group dropup float-end">
                        <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                          ...
                        </button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item" name="orders_range" value="5" type="submit">5</button>
                            <button class="dropdown-item" name="orders_range" value="10" type="submit">10</button>
                            <button class="dropdown-item" name="orders_range" value="20" type="submit">20</button>
                            <button class="dropdown-item" name="orders_range" value="all" type="submit">wszystkie</button>                        
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <td>Nr.</td>
                            <td>Klient</td>
                            <td>Cena</td>
                            <td>Status</td>
                        </tr>
                    </thead>
                    <tbody>          
                        {% for order in last_orders %}
                            <tr>
                                <td class="order-id">{{order.id}}</td>
                                <td>{{order.customer.first_name}} {{order.customer.last_name}}</td>
                                <td>{{order.get_total_cost}}</td>
                                {% if order.status == "1" %}
                                    <td><span class="badge bg-success">{{order.get_status_display}}</span></td>
                                {% else %}
                                    <td><span class="badge bg-warning">{{order.get_status_display}}</span></td>
                                {% endif %}
                                <td><a class="redirect-a btn btn-sm btn-primary" href="{% url 'order-info' order.id%}">Więcej</a></td>
                            </tr>
                        {% endfor %}   
                    </tbody>                 
                </table>
            </div>
        </div>
        </form>
    </div>
</div>
{% endblock %}